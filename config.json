{
  "paths": {
    "runs_dir": "runs",
    "csv_train": "data/quic360/train.csv",
    "csv_val": "data/quic360/valid.csv"
  },
  "models": {
    "vision_name": "google/siglip-base-patch16-224",
    "language_model_name": "Qwen/Qwen2.5-0.5B-Instruct",
    "resampler_type": "mlp",
    "latent_dimension": 768,
    "resampler_depth": 3,
    "resampler_hidden_dim": 1536,
    "resampler_use_ln": true,
    "resampler_enable_cross_view": false,
    "resampler_num_views": 8
  },
  "image_processing": {
    "crop_strategy": "e2p",
    "image_size": [224, 224],
    "overlap_ratio": 0.5,
    "fov_deg": 90.0,
    "image_mean": [0.48145466, 0.4578275, 0.40821073],
    "image_std": [0.26862954, 0.26130258, 0.27577711],
    "use_vision_processor": true,
    "anyres_patch_size": 336,
    "anyres_max_patches": 12,
    "normalize": true
  },
  "training": {
    "prefix": "SQ2_05_latent768",
    "default_stage": "finetune",
    "stages": ["vision","resampler", "finetune"],
    "num_workers": 16,
    "epochs": 1,
    "lr": 5e-5,
    "max_text_length": "auto:dataset",
    "system_msg": "You are a helpful assistant. Desicribe the panorama image.",
    "wandb_project": "panollava-training",
    "vision": {
      "epochs": 5,
      "lr": 0.0001,
      "batch_size": 64,
      "accumulate_grad_batches": 2,
      "vicreg_loss_weight": 1.0,
      "vicreg_similarity_weight": 25.0,
      "vicreg_variance_weight": 25.0,
      "vicreg_covariance_weight": 1.0,
      "max_text_length": "auto"
    },  
    "resampler": {
      "epochs": 1,
      "lr": 2e-6,
      "batch_size": 2,
      "accumulate_grad_batches": 2,
      "vicreg_loss_weight": 0.0,
      "max_text_length": "auto"
    },
    "finetune": {
      "epochs": 1,
      "lr": 2e-6,
      "batch_size": 2,
      "accumulate_grad_batches": 2,
      "vicreg_loss_weight": 0.0,
      "max_text_length": "auto"
    }
  },
  "environment": {
    "cuda_visible_devices": "0",
    "wandb_project": "panollava-training"
  },
  "data": {
    "csv_train": "data/quic360/train.csv",
    "csv_val": "data/quic360/valid.csv",
    "max_text_length": "auto",
    "auto_max_text_length_cap": 1024
  },
  "system_messages": {
    "default": "You are a helpful assistant."
  },
  "lora": {
    "use_lora": true,
    "rank": 32,
    "alpha": 64,
    "dropout": 0.1,
    "target_modules": [
      "q_proj",
      "k_proj", 
      "v_proj",
      "o_proj",
      "gate_proj",
      "up_proj",
      "down_proj"
    ],
    "save_lora_only": false
  }
}
